{% extends "header.html" %}
{% block body %}
  {% if error %}<p class=error><strong>Error:</strong> {{ error }}{% endif %}
  <span>---------------------------------------------</span>
  
  <h1>Index.html</h1>
  <h2>Resultado das pesquisas</h2>

  {% if dados %}
    {% for dado in dados %}
     <h4> {{ dado.nome }}</h4>
      {{ dado.uriPartido }} <br>
      {{ dado.uri }} <br>
      {{ dado.id }} <br>
      <a href="/deputado/{{ dado.id }}">pagina do deputado</a> <br>
      {{ dado.id }}
      {{ dado.siglaPartido }}<br>
      <a href="/estado/{{ dado.siglaUf }}"> {{ dado.siglaUf }}<br> </a>
      {{ dado.idLegislatura }}<br>
      {{ dado.urlFoto }}<br>
    {% else %}
      <li><em>Pesquisa algo ai.</em>
    {% endfor %}
    <button onclick="oi()">Mostrar mais</button>
  {% else %}
    <h4>Deputado nao encontrado</h4>
  {% endif %}

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
  console.log($('input[name=data]').val())
  let size = 1
  let data = null
  function oi(){
    $.ajax({
      method: "GET",
      url: `mostrar/${size}`,
      // data: { name: "John", location: "Boston" }
      beforeSend: function(){
        $("#loader-gif").show()
      },
      success: function(res){
        size++
        data = res
      },
      complete: function(){
        $("#loader-gif").hide()
      }
    })
  }
</script>
{% endblock %}  